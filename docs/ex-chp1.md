# Chapter 1 基础知识

## 1.1 技能顺序

想必你已经知道了什么是技能的“熟练度”，但是仅仅知道这个是不够的。对于**每个名字**而言，它的技能存在**顺序**。这个顺序是在名字生成的时候就决定的，每个名字并不相同。

显然，一个号在一次行动中只能发动一种主动技能，当多个主动技能同时满足发动条件时，会按照这些技能的顺序依次进行判定（成功发动技能的概率为其熟练度/128），直到某一技能成功发动或全部判定结束。因此，在熟练度相同的情况下，顺序越靠前的技能越容易先发动。

举例：假如一个号只有两个主动技能，记作技能 A 和技能 B，其熟练度分别为 64 和 96。在两个技能发动条件都满足的情况下：

- 如果 A 在前、B 在后，那么发动 A 的概率为 1/2，发动 B 的概率为 \(1 - 1/2\) × 3/4 = 3/8；
- 如果 B 在前、A 在后，那么发动 B 的概率为 3/4，发动 A 的概率为 \(1 - 3/4\) × 1/2 = 1/8。

需要注意的是，无论这两个技能顺序如何，在该情境下都有 1/8 的概率不发动任何技能（即使其条件都已满足）。

可以使用后面提到的 XP-convert 转换器查询号的技能顺序。<br>
由于名字技能生成的方式（具体生成规则会在第 8 章中详细介绍），高熟练度大概率只会在最后两个技能以及最后一个主动技能（位置可能重合）上出现，因此“熟练度高的技能总是在后面”是非常正常的现象，不要抱怨。

## 1.2 嘲讽值理论

这个是解释战斗中索敌机制的理论。

根据玩家【新纪元】研究发现，一个号的 \(攻-防\)+\(魔-抗\)+速+\(敏+智\)\*0.5，这项数值对对手的索敌十分关键，我们称其二倍为“**嘲讽值**”。（乘二的好处是将数值变成整数，也有部分人/工具习惯不乘二，注意区分）

我们只讨论二人组，在二人组中如果一个号的嘲讽值高于另一个号，那么在对战中会**显著**更容易被**大部分攻击**索敌（有些技能的索敌机制不一样）。这样的嘲讽值差距是**突变**型而非平滑的。这意味着，仅仅一两点的属性改变可能会造成胜率，或者说强度的巨大差异。

在测强评的过程中，队友天卫的嘲讽值分布基本上可以认为是连续的。但是二人组的队友是单一的，这将对组合的配制（简称**配队**）产生巨大影响。

以背刺号举例，背刺号非常注重**不容易被打**这一个特质。由于在测强评的时候天卫的嘲讽值不定，所以嘲讽值越低越不容易被打，因此我们可以发现，大部分高强评背刺号的嘲讽值都偏低（具体表现通常为攻低防高，有时候敏低，其他属性对背刺来说比较重要所以一般不能低）。

但是在配二人组的时候，只需要背刺号的队友（我们一般称为辅助）嘲讽值高于他即可。所以我们会发现一些高嘲讽值的背刺在配合适的队友的情况下实战并不差，即使他的强评是偏低的。

同理，高强评的辅助号的嘲讽值一般偏高，但是实际上部分低嘲讽值、低强评的辅助号找到合适的背刺队友也能有不差的实战。

通过 diy 定制捏假人实验（具体原理会在第 5 章中详细介绍）可以发现一些组合中背刺号的攻属性被人为增加到一定程度后组合 cqp 反而急剧下降的情况，这便是加攻后背刺号嘲讽值高于辅助，出现“逆嘲讽”现象导致的。

## 1.3 比较重要的性质总结

这部分有些是经验性的，可能没有经过扒代码检验。有些是虽然之前提到过但是比较重要，所以单独拎出来特别说明的。

拥有隐匿技能的号不会受到幻影附体/狂暴术的狂暴效果影响（不需要发动技能就能防狂暴）。实际上这是游戏作者【Rinick】写挂的 bug，但是我们当特性用了。

地裂有时候只会攻击一个人，即使对方活着的目标不止一人。

被投毒、诅咒等带有 debuff 效果的技能魔攻击倒时，如果触发了护身符，复活后不会被挂上 debuff。

护盾的工作原理是，每回合按照护盾熟练度积累护盾点数（这个过程不会显示在战斗文字中），在受到的攻击力小于护盾量时会削减相应的护盾量并且受到 0 点伤害，但是在攻击大于护盾量时攻击力不减且护盾量清零。<br>
也就是说，如果你有 50 点护盾：

- 受到对方一次 20 点伤害的攻击时会扣除 20 点护盾，并显示为“受到 0 点伤害”；
- 受到对方一次 100 点伤害的攻击时则会直接清空护盾并扣除 100 点血量。

幻影的属性可以通过在 @ 符号前面加上 `?shadow`（例如 `1?shadow@我的战队`）来进行计算，但是 HP 折半计入。<br>
使魔的属性是攻魔分别 36，防抗和本体一致。另外三个属性可以通过在 @ 符号前面加上 `?summon` 计算。

## 1.4 一些小工具

在[资源文件下载页](res-files.md)中的 “exe-tools 常用工具集”处下载。

绝大多数名竞工具都只提供 windows exe 可执行文件，这里的也不例外。如果你使用的是其他系统，可以自行编译工具包中附带的源代码。

### 1.4.1 XP-convert

将一大堆号丢进虚评器/转换器里的时候会测得很慢，所以开发了 cpp/exe 版本。

有 XP/convert/sort-convert 等多种版本。convert 和 sort-convert 的区别在于是否将技能按照熟练度排序。

在 `input.txt` 中输入号（按行分隔，**文末要换行**），然后运行 exe，会将结果输出在 `XP.txt` 或者 `convert.txt` 之类的文件里面。

同时提供了 cpp 源代码，可以自己进行修改，然后重新编译。

**确保你输入的时候是 UTF-8 编码！！！**

### 1.4.2 sort

后面这些东西其实和名竞无关了，但是有些人确实是不会编程的，因此也写了。

这个工具的用途是把其他工具输出的一行一行的 `[评分] [号/多人组]` 输出格式按评分排序。

在 `input.txt` 中每一行先输入分数，然后单个空格，然后输入号/多人组，然后换行。**在文件的开头输入总量！**

运行 exe，输入 0 或者 1，表示不输出分数/输出分数，结果在 `sort.txt` 里。

### 1.4.3 一键分类战队并去除 xp/xd

将 exe 文件放置于测号器 out 目录下，运行该程序，可按照战队进行分类到对应的 .out 文件（会删除该目录下原有 .out 文件）。

**确保你输入的时候是 UTF-8 编码！！！**

若文件中有特殊字体（emoji 等）可能会出现未知问题，慎用。

### 1.4.4 编码转换

双击打开 UltraCodingSwitch.exe。这个工具是从网上找到的，和玩家自己编写的各种草台工具不一样，有明确的 UI，可以自己看。

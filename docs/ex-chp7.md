# Chapter 7 二人组模型拟合配队

在第 3 章中，我们已经提到了不同种类的组合以及对应的丝评模型：

- 有刺组，构成是“背刺+辅助”，对应 scp 和 sfp
- 传统无刺，没有固定的分工，对应 sdp
- 人海组，大致分为分身组和幻术组，构成是“核心+配件”，对应 fs, hs, fspj, hspj

ds 配队器的原理也在这一章中有所涉及：取每一种类型丝评较高的若干个号，按不同类型组合进行平方枚举，并输出两个号加成后对应评分之和较大的二人组。

本章将介绍 ds 配队器的使用方法。配队器压缩包可在[资源文件下载页](res-files.md)获取。

## 7.1 配队操作流程

解压工具包后，请按顺序进行如下步骤：

**0\.** 检查 `Regular` 目录下的 `config.txt`，pbb 几开就把第五行的数值设为几。同时将 6~8 行每行的第一个数依次改为 1 1 0。<br>
检查 `Many` 目录下的 `config.txt`，pbb 几开就把第五行的数值设为几。同时将第 4、5 行的两个数改为 1，将 6~9 行的数依次改为 1 0 1 0。

- 不进行这步，可能会导致电脑卡顿，或 out 文件无输出。

**1\.** 将粗号文件放入根目录下 `input` 文件夹。

- 输入文件格式要求号后无 xp xd 评分，一行一个。
- **注意，保证你的输入是 utf-8 格式！！！**

**2\.** 在根目录下运行 `run.bat`。

- 如果是第一次运行，可能需要比较久的时间。

**3\.** 当 `run.bat` 控制台窗口消失，前往根目录下 `Regular` 和 `Many` 的 `out` 文件夹，得到 `FC.txt WC.txt FS.txt HS.txt` 四个文件，分别代表有刺、无刺、分身、幻术组枚举出的组合。

- 输出文件的格式为 `<总丝评> <名字1>+<名字2>`，一行一组。

**4\.** 如果你想要开箱了，双击运行 `get.exe`，并且输入 0，它会将 `out` 文件夹内的二人组汇总，并按照 类型分数-类型阈值 进行排序。如果输入 1 则表示输出含有评分的。会进行去重。

**5\.** 将得到的 `input.txt` 用开箱器开箱即可。

- **开完箱记得将 `out` 文件夹内的东西全部删除，否则会混在一起！**

**6\.** 每隔一段时间放入新的号，重复以上过程即可。

常见问题：

**Q1\.** 我运行完 out 里没有东西，怎么回事？<br>
去检查 config.txt 的配置。

**Q2\.** 我设错 config.txt 了！我想重新跑一遍已经入库的号的配队怎么办？<br>
清空除 input 之外的所有文件夹，再跑一遍。

**Q3\.** 程序没法占满 cpu 资源，怎么调优先级？<br>
双击打开根目录**和（不是或）** `Many` 目录下的 `priority.cmd`。

## 7.2 号库查看与管理

ds 在配队的同时会建立一个分技能的号库，存放在 `Regular` 和 `Many` 的 `file` 文件夹内，其中的 `old_xx_score.txt` 存储了不同种类丝评的排行榜。

除此之外，ds 还内置了一个预测 cqd 的模型（scqd），预测分数存储在 `Regular/file/old_dt_score.txt` 中。你可以把这个文件中 scqd 较高的号拉去开箱，筛选单挑号。

## 7.3 杂项说明

时刻要注意，ds 输出的丝评分数仅有**筛子**作用，并不能看做类似拟合评分的东西。<br>
换而言之，你不应该只测丝评最高的几个二人组，发现不强，然后就放弃。

由于人海组的丝评并不那么准确，因此增加了测实际评的选项，这也是为什么 `Many` 目录下有个 `openbox` 文件夹。<br>
其运作方式为，对于分身/幻术号，测完丝评后将过筛的号拿去和实际的对应基准号组合测 1% cqp，并记录。最后在枚举二人组的时候，估算的分数为 \(实际测的评分 - 预测原来的评分 + 预测加成后的评分\)。<br>
分身配件和幻术配件也有对应的测实际评分选项开关（即 1 0 1 0 中的两个 0），但是非常不建议开启。

`Many` 目录下的 `priority.cmd` 应该在什么时候启动，你应该已经可以自己推理出来了。但还是要说一下，这个 `cmd` 仅在 `Many` 内进行测实际评分的时候有效果，不过你提前开起来问题也不大。

`Regular` 目录下有一个 `readme.pdf`，不过是很早期只有常规组合配队器的时候写的，现在稍微修改了一下，懒得再给 `Many` 写一份对应的了。

目前该整合包完全开源，如果你拥有编程基础，可以前往 `src` 文件夹查看源代码。<br>
tip：根目录下存在一键编译的 bat 文件。

## 7.4 丝评小工具

在[资源文件下载页](res-files.md)中的 “exe-tools 常用工具集”和 “HtmlTools” 处下载。

### 7.4.1 SP\_all

这是单独的丝评器。

输入在 `input.txt` 里，每行一个号，结尾换行。

点开 `exe` 之后会有提示，让你输入一个数字，分别表示某一个种类的丝评，一共 7 种。输入 0 表示 scqd。<br>
输入 8 则表示输出**所有比较高的**。这个比较高的有设定在程序内的一个阈值，你可以自行调整源码然后重新编译来修改。也被称为“偷看器”，意思是在跑 ds 和测二人组之前先偷偷看看有没有看上去比较强的号。

输出在 `SP.txt` 里。格式为 `<分数> <号>`。

### 7.4.2 SP\_ptt

这个是“潜力丝评”计算器，用于计算这个号可能通过单个加成获得的最强实力水平。实际上 ds 在入库时筛选的不只是丝评，还有这样的“潜力”值。

输入在 `input.txt` 里，每行一个号，结尾换行。<br>
输出在 `SP_ptt.txt` 里。格式为 `<原分数> <潜力分数> <号>`。<br>
没有“偷看器”和 scqd 功能。

缺陷是，假如有些号有两个属性比较容易加成并且会带来比较大的提升，它只会选择相对而言提升更大的那个。同时对于一些具有特殊的“双加成性质”（在第 8 章中解释）的号也会一定程度上低估。

### 7.4.3 two\_score

这个是用来测二人组加成后的指定总丝评的。

输入在 `input.txt` 里，每行一组，以 `+` 分隔，结尾换行。<br>
输出在 `two_score.txt` 里。

这个工具的作用是，根据你已有的二人组，测试各方面的评分，方便确定阈值。

### 7.4.4 HtmlTools

主要就是把各种丝评做成了 HTML 版本，UI 更加亲民。同时整合了一些其他小工具的功能，如组队加成计算、字符串处理等。

需要注意的是此工具对于模型的简称与本教程有出入，例如 sdp 在工具中被称为 swc（丝无刺）、scqd 被称为 sdt（丝单挑）等。
